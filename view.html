<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Softball Lineup Viewer</title>
<style>
  body{font-family:Arial,sans-serif;text-align:center;background:#f4f4f4;margin:0}
  h1{background:#2c3e50;color:#fff;margin:0;padding:20px}
  .field{position:relative;width:500px;height:500px;
         background:radial-gradient(circle at center,#a5d6a7 60%,#6abf69 100%);
         margin:30px auto;border-radius:50%;box-shadow:inset 0 0 10px #333}
  .base{width:50px;height:50px;background:#fff;position:absolute;transform:rotate(45deg)}
  .home{bottom:30px;left:50%;transform:translateX(-50%) rotate(45deg)}
  .first{right:70px;bottom:150px}
  .second{top:50%;right:230px;transform:translateY(-50%) rotate(45deg)}
  .third{left:70px;bottom:150px}
  .label{position:absolute;font-weight:bold;color:white;text-shadow:1px 1px 2px black;font-size:12px;text-align:center}
  #labelC{bottom:10px;left:50%;transform:translateX(-50%)}
  #label1B{right:50px;bottom:160px}
  #label2B{top:50%;right:230px;transform:translateY(-50%)}
  #label3B{left:50px;bottom:160px}
  #labelP{top:50%;left:50%;transform:translate(-50%,-50%)}
  #labelSS{top:50%;left:200px;transform:translateY(-50%)}
  #labelCF{top:50px;left:210px}
  #labelLF{top:100px;left:70px}
  #labelRF{top:100px;right:70px}
  .player{position:absolute;transform:translate(-50%,-50%);
          background:#1976d2;color:#fff;padding:6px 10px;border-radius:20px;font-size:14px}
</style>
</head>
<body>

<h1>Softball Lineup Viewer</h1>

<div class="field" id="field">
  <div class="base home"></div>
  <div class="base first"></div>
  <div class="base second"></div>
  <div class="base third"></div>
  <div id="labelC" class="label">C</div>
  <div id="label1B" class="label">1B</div>
  <div id="label2B" class="label">2B</div>
  <div id="label3B" class="label">3B</div>
  <div id="labelP" class="label">P</div>
  <div id="labelSS" class="label">SS</div>
  <div id="labelCF" class="label">CF</div>
  <div id="labelLF" class="label">LF</div>
  <div id="labelRF" class="label">RF</div>
</div>

<script>
const apiURL = "https://script.google.com/macros/s/AKfycby2ZVRnMHAJExHjhXLMSkAwKgFj54_jwy6fnInITPWBpwmysylj4sW7XoFJq3L817s/exec" + new Date().getTime();

async function loadPlayers(){
  try{
    const res=await fetch(apiURL);
    const players=await res.json();
    render(players);
  }catch(e){console.error(e);}
}

function render(players){
  const field=document.getElementById("field");
  field.querySelectorAll(".player").forEach(p=>p.remove());
  const positionMap={"C":[250,450],"1B":[400,340],"2B":[450,250],"3B":[100,340],
                     "P":[250,250],"SS":[200,250],"CF":[210,50],"LF":[70,100],"RF":[430,100]};
  players.forEach(p=>{
    const div=document.createElement("div");
    div.className="player";
    div.textContent=p.name;
    const pos=[p.x||positionMap[p.position]?.[0]||250,p.y||positionMap[p.position]?.[1]||250];
    div.style.left=pos[0]+"px";
    div.style.top=pos[1]+"px";
    field.appendChild(div);
  });
}

loadPlayers();
setInterval(loadPlayers,30000);
</script>
</body>
</html>
